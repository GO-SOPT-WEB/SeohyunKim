# 💟 웹 최적화

## 1. 웹 최적화는 무엇일까?

> 최고의 웹 성능을 구현하기 위해 최고의 조건을 만드는 작업을 의미한다.

웹 프론트엔드의 관점에서 보자면, 각종 파일들을 주고 받으며 화면을 띄우고 화면을 업데이트하는 과정속에서 비용을 소모하고 이는 성능 저하로 이어진다.<br/><br/> 따라서 브라우저에서 <span style="text-decoration: underline">콘텐츠를 다운로드, 로딩, 렌더링 할때 **속도가 빨라지도록** 환경을 구축</span>하는 것, <span style="text-decoration: underline">사용자 경험(UX)</span>를 개선하는 작업을 최적화 예로 들 수 있다.

---

## 2. 최적화가 필요한 이유는 무엇일까?

기능에 초점을 맞춰 개발을 하다보면 분명 성능 측면에서 놓치게 되는 부분이 많을 것이다. 이런 점을 보완하고 성능을 개선하기 위해서는 **최적화** 과정이 필요하다.

특히 웹 프론트엔드는 사용자와 가장 가까운 지점에서 상호작용하는 환경을 제공하므로, 사소한 사용자 경험까지도 서비스 이용률에 큰 영향을 미칠 것이다.

관련된 내용으로 `3초의 법칙(Seconds Rule)`이 있다.<br/>
실제로 구글의 조사 자료에 따르면 페이지가 3초 안에 로딩되지 않았을 때 53% 사용자가 떠나고 길어질수록 이탈률이 늘어난다는 내용이다.

또, BBC의 경우 페이지 로드 시간이 1초 늘어날 때마다 전체 사용자의 10%를 잃어버린다고 한다.

---

## 3. 이를 위해 어떤 개발을 해야 할까?

### 성능 측정 도구 이용하기

- 구글 크롬 Lighthouse
- PageSpeed Insights

### HTML

- 인라인 스타일을 지양한다.
  👉 스타일 시트에 작성하는 것이 표준에도 맞고, 유지보수 측면에서도 좋다!
- 복잡한 DOM 트리를 지양한다.
  👉 불필요하게 감싸는 요소는 제거
- CSS를 HTML 상단에, 자바스크립트를 HTML의 하단에 위치시키기
- media 속성 사용하여 해당하는 스타일 시트만 불러오기

### CSS

- 사용하지 않는 CSS 제거
- 간결한 스타일 작성<br/>
  👉 css가 복잡하고 방대할수록 레이아웃을 그리는 데에 시간이 많이 소요된다. 선택자를 간결하게 사용하여 특이성을 낮게 유지하는 것이 좋다.

### JS

- 리다이렉트 피하기
- Ajax 통신 최소화하기
- 불필요 렌더링, 리렌더링 막기
- 중복되는 이벤트 핸들링

### 이미지

- WebP 등으로 브라우저 이미지 형식을 최적화
- 이미지 손실, 무손실 압축
- picture 태그의 type 속성 이용하기
- 지연로딩 활용하기<br/>
  ex) `lazy`: 화상에 보이는 부분만 먼저 출력하고 화면 바깥쪽 이미지들은 로딩하지 않는다. 사용자가 화면을 위로 올리면 아래쪽에 있던 이미지가 올라오면서 로딩된다.

### 그 외

- 도메인 수를 줄여 DNS 조회를 최소화
- 웹팩 사용
  👉 모듈 번들러 웹팩(Webpack)을 사용해서 css와 js 파일을 번들링해 리소스 요청을 줄일 수 있다
- 캐싱
  👉 동일한 URl의 리소스 요청이 왔을 때 이전에 저장해둔 파일을 사용해서 더 빠르게 로딩하는데에 사용

---

## 4. 최적화를 위한 개발을 꼭 해야 할까?

**그렇다.**

최적화가 필요한 이유에도 언급했듯이, 서비스 유치 측면에서 사용자 경험은 매우 중요할 뿐더러, 웹 서비스는 **사용자**가 중심이 되는 만큼 **사용자**의 만족도를 위해 성능 개선을 중요시해야 한다고 생각한다.

성능 개선을 신경 쓰지 않고 모든 개발을 끝낸 후에 최적화하려고 미루기 보다는, 최적화를 고려하여 개발하는 것이 중요하다고 생각한다.

예를 들어 다양한 웹 환경에 대응하기 위해 브라우저 별, 디바이스 별 환경을 고려하며 개발해야 한다. 그렇지 않다면 최신 브라우저에서는 최상으로 동작하지만 구 버전 브라우저에서는 동작도 안하는 문제가 발생 할수도 있다.

또 불필요한 렌더링과 리렌더링 그리고 서버 통신을 막을 수 있도록 구현하는 등 웹 성능을 고려하며 개발하는 것이 필요하다고 생각한다.
