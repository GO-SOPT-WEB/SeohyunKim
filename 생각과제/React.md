# 💟 React

## 1. React에서 상태관리는 왜 필요한가?

> 상태(state)란?
> 웹 어플리케이션을 render하는데 있어 영향을 미칠 수있는 값

react는 단방향 데이터 흐름을 가지는 라이브러리로, 여러 컴포넌트가 상태를 공유할 때 부모 컴포넌트에서 자식 컴포넌트에 props를 통해 state를 전달해야 하고 이를 `props drilling`이라고 부른다. 컴포넌트의 뎁스가 커지면 이는 불필요한 리렌더링을 야기하고, 어떤 컴포넌트에서 변화를 일으켰는지 추적하기 어려워지는 등 여러 문제점을 발생시킨다.

상태 관리를 통해 이러한 현상을 막고, 효율적으로 상태를 관리해야 한다.

---

## 2. 관리 해야 하는 상태에 대한 기준은 무엇인가?

상태 관리의 근본적인 목적이 `props drilling`에서 생기는 문제점을 방지하고자 하는 것인 만큼 **많은 컴포넌트**에서 사용해야 하는 상태가 그 기준이 될 수 있다고 생각한다. 특히 같은 상태를 공유하기 위해서 상태를 사용하지 않고 중간 단계 역할만 하게 되는 컴포넌트가 있는 경우 불필요한 props drilling을 방지하기 위해서 필요하다. 상태 관리를 통해 많은 컴포넌트에서 접근해서 상태를 변경하는 경우에도 중앙에서 상태를 관리할 수 있는 만큼 효율적이고 편리해질 수 있다고 생각한다.

반대로, 간단하게 적은 props drilling이 일어나고, 같은 상태에 접근하는 컴포넌트가 별로 없는 간단한 경우에는 굳이 상태관리 라이브러리를 쓰지 않아도 된다고 생각한다. 개인적으로 이런 경우에는 props로 넘겨주는 것도 직관적인 흐름을 볼 수 있기에 간단한 경우에는 장점이 될 수 있다고 생각한다.

---

## 3. 어떤 상태관리 라이브러리를 어떤 상황에서 사용해야 할까? ( 장단점 또는 간단 비교 분석 )

상태관리 라이브러리 ex) `MobX`, `xstate`, `recoil`, `zustand` ...

대표적인 세 가지의 상태관리 라이브러리에 대해 알아보겠다.

### Context API

- react 자체 상태관리 API
- 원하는 컴포넌트만 context의 value를 사용함으로써 props drilling의 문제점을 해결한다.
- 정적인 데이터 위주로 처리하거나 업데이트가 자주 발생하지 않을 때 사용하기 적합하다.
- 복잡한 업데이트를 처리 할 때에는 비효율적이다. Provider로 감싸진 부분의 업데이트가 되지 않은 state도 리렌더링이 발생하기 때문이다.

### Redux

- action, reducer, selector, store를 세팅하는 보일러플레이트 코드가 있다. 이는 유지보수 측면에서 장점을 가지고 있지만, 상태의 개수가 적은 경우 보일러플레이트 코드가 그에 비해 크다는 단점이 있다.
  👉 규모가 큰 프로젝트에서 사용하는 것이 적합하다.
- store에 모든 상태를 저장하는 중앙집중방식
- 비동기 데이터 처리를 하려면 saga와 같은 별도의 라이브러리를 추가적으로 사용해야 한다.
- store은 외부 요소이기 때문에 리액트 내부에 접근할 수 없다.

### Recoil

- 페이스북에서 나온 리액트를 위한 라이브러리
- Atom과 Selector로 이루어져 있다.
- Atom을 구독한 해당 컴포넌트들만 선택적으로 리렌더링 된다.
- Selector을 통해 비동기 처리 뿐만 아니라 데이터 캐싱 기능도 사용 가능하다.
- 보일러플레이트가 없다.

---

## 4. React에서 렌더링을 효과적으로 관리하는 방법은 무엇이 있을까?

1. `key`값 적절하게 사용하기
   리스트 컴포넌트, 특히 맵핑 시에 고유한 key값 설정을 하면, 리액트가 리렌더링시 비교 연산을 통해 불필요한 리렌더링을 하지 않는다.

2. `React.memo` 사용하기
   이전 렌더링 결과를 기억하여 props가 변경되지 않았을 경우, 이전 렌더링 결과를 재사용한다.

3. `PureComponent`와 `shouldComponentUpdate` 이용하기
   컴포넌트의 props 또는 state가 변경되었을 때, 컴포넌트가 다시 렌더링되어야 할지를 결정해준다. 이를 이용하여 불필요한 렌더링을 방지할 수 있다.
   참고 : <a href="https://yoonjong-park.tistory.com/entry/PureComponent%EC%99%80-Component%EC%9D%98-%EC%B0%A8%EC%9D%B4">PureComponent와 Component의 차이</a>

---

## 5. 이를 위해 어떤 식으로 비즈니스 설계를 진행해야 할까?

> 비즈니스 설계란?
> "비즈니스 설계(Business Design)"란 기업이나 조직이 프로젝트나 제품을 개발하기 전에 기능과 요구사항을 정의하고, 이를 기반으로 구현을 위한 계획을 수립하는 과정입니다.<br/>
> 즉, 비즈니스 설계는 기업이나 조직이 목표를 달성하기 위한 일련의 과정을 계획하고 설계하는 단계로, 요구사항 수집과 분석, 시스템 아키텍처 설계, 프로젝트 일정 및 예산 계획 등을 포함합니다.<br/>
> React 애플리케이션을 개발할 때, 비즈니스 설계는 프로젝트의 목표와 요구사항을 이해하고, 이를 바탕으로 프론트엔드 개발자들이 효과적으로 협업하여 기능을 구현할 수 있도록 도와줍니다.

기능 별로 관심사를 분리하여 재사용하기 쉽고, **불필요한 렌더링을 최소화하도록** 컴포넌트를 분리한다. (+ UI와 비즈니스 로직을 따로 분리하는 방법도 도움이 될 것 같다.)
이외에 데이터가 어떤 state로부터 영향을 받는지 고려하여 상태관리 라이브러리, useMemo, useCallback과 같은 메소드들을 적절히 사용하면 좋을 것 같다.
